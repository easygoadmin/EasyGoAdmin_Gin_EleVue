!function(n){var e={};function t(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,i){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:i})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(i,o,function(e){return n[e]}.bind(null,o));return i},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){t(1)},function(n,e){layui.define(["form","layer","laydate","upload","element","base"],(function(n){"use strict";var e=layui.form,t=void 0===parent.layer?layui.layer:top.layer,i=layui.laydate,o=layui.upload,r=(layui.element,layui.base),a=layui.$,l={edit:function(n,e=0,t=0,i=0,o=[],a=null,c=!1){var u=e>0?"修改":"新增";r.isEmpty(n)?u+="内容":u+=n;var s=cUrl+"/edit?id="+e;if(Array.isArray(o))for(var f in o)s+="&"+o[f];l.showWin(u,s,t,i,o,2,[],(function(n,e){a&&a(n,e)}),c)},detail:function(n,e,t=0,i=0,o=!1){var r=cUrl+"/detail?id="+e;l.showWin(n+"详情",r,t,i,[],2,[],null,o)},cache:function(n){var e=cUrl+"/cache";l.ajaxPost(e,{id:n},(function(n,e){}))},copy:function(n,e,t=0,i=0){var o=cUrl+"/copy?id="+e;l.showWin(n+"复制",o,t,i)},delete:function(n,e=null){t.confirm("您确定要删除吗？删除后将无法恢复！",{icon:3,skin:"layer-ext-moon",btn:["确认","取消"]},(function(i){var o=cUrl+"/delete?ids="+n;console.log(o),l.ajaxPost(o,{},(function(n,o){e&&(t.close(i),e(n,o))}),"正在删除。。。")}))},batchFunc:function(n,e=null){var i=n.url,o=n.title,r=(n.form,n.confirm||!1),a=n.show_tips||"处理中...",c=n.data||[],u=n.param||[],s=n.type||"POST";if("导出数据"!=o&&0==c.length)return t.msg("请选择数据",{icon:5}),!1;var f=[];for(var d in c)f.push(c[d].id);var y=f.join(","),m={};if(m.ids=y,Array.isArray(u))for(var d in u){var p=u[d].split("=");m[p[0]]=p[1]}console.log(m),r?t.confirm("您确定要【"+o+"】选中的数据吗？",{icon:3,title:"提示信息"},(function(n){"POST"==s?l.ajaxPost(i,m,e,a):l.ajaxGet(i+"/"+y,{},e,a)})):"POST"==s?l.ajaxPost(i,m,e,a):l.ajaxGet(i+"/"+y,{},e,a)},verify:function(){e.verify({number:[/^[0-9]*$/,"请输入数字"],username:function(n,e){return new RegExp("^[a-zA-Z0-9_一-龥\\s·]+$").test(n)?/(^\_)|(\__)|(\_+$)/.test(n)?title+"首尾不能出现下划线'_'":/^\d+\d+\d$/.test(n)?title+"不能全为数字":void 0:title+"不能含有特殊字符"},pass:[/^[\S]{6,12}$/,"密码必须6到12位，且不能出现空格"]})},submitForm:function(n,e=null,t=null,i=!0){var o=[],c=[],u=n;if(a.each(u,(function(n,e){console.log(n+":"+e);if(/\[|\]|【|】/g.test(n)){var t=n.match(/\[(.+?)\]/g);e=n.match("\\[(.+?)\\]")[1];var i=n.replace(t,"");a.inArray(i,o)<0&&o.push(i),c[i]||(c[i]=[]),c[i].push(e)}})),console.log(u),console.log(o),console.log(c),a.each(o,(function(n,e){var t=[];a.each(c[e],(function(n,i){t.push(i),delete u[e+"["+i+"]"]})),u[e]=t.join(",")})),null==e){e=cUrl;var s=a("form").attr("action");r.isEmpty(s)?null!=n.id&&(0==n.id?e+="/add":n.id>0&&(e+="/update")):e=s}console.log(u),l.ajaxPost(e,u,(function(n,e){if(e)return i&&setTimeout((function(){var n=parent.layer.getFrameIndex(window.name);parent.layer.close(n)}),500),t&&t(n,e),!1}))},searchForm:function(n,e,t="tableList"){n.reload(t,{page:{curr:1},where:e.field})},initDate:function(n,e=null){if(Array.isArray(n))for(var t in n){var o=n[t].split("|");if(o[2])var r=o[2].split(",");var a={};if(a.elem="#"+o[0],a.type=o[1],a.theme="molv",a.range="true"===o[3]||o[3],a.calendar=!0,a.show=!1,a.position="absolute",a.trigger="click",a.btns=["clear","now","confirm"],a.mark={"0-06-25":"生日","0-12-31":"跨年"},a.ready=function(n){},a.change=function(n,e,t){},a.done=function(n,t,i){e&&e(n,t)},r){var l=r[0];if(l){var c=!isNaN(l);a.min=c?parseInt(l):l}var u=r[1];if(u){var s=!isNaN(u);a.max=s?parseInt(u):u}}i.render(a)}},showWin:function(n,e,t=0,i=0,o=[],r=2,l=[],c=null,u=!1){var s=layui.layer.open({title:n,type:r,area:[t+"px",i+"px"],content:e,shadeClose:u,shade:.4,skin:"layui-layer-admin",success:function(n,e){if(Array.isArray(o))for(var t in o){var i=o[t].split("=");layui.layer.getChildFrame("body",e).find("#"+i[0]).val(i[1])}c&&c(e,1)},end:function(){c(s,2)}});0==t&&(layui.layer.full(s),a(window).on("resize",(function(){layui.layer.full(s)})))},ajaxPost:function(n,e,i=null,o="处理中,请稍后..."){var r=null;a.ajax({type:"POST",url:n,data:JSON.stringify(e),contentType:"application/json",dataType:"json",beforeSend:function(){r=t.msg(o,{icon:16,shade:.01,time:0})},success:function(n){if(0!=n.code)return t.close(r),t.msg(n.msg,{icon:5}),!1;t.msg(n.msg,{icon:1,time:500},(function(){t.close(r),i&&i(n,!0)}))},error:function(){t.close(r),t.msg("AJAX请求异常"),i&&i(null,!1)}})},ajaxGet:function(n,e,i=null,o="处理中,请稍后..."){var r=null;a.ajax({type:"GET",url:n,data:e,contentType:"application/json",dataType:"json",beforeSend:function(){r=t.msg(o,{icon:16,shade:.01,time:0})},success:function(n){if(0!=n.code)return t.msg(n.msg,{icon:5}),!1;t.msg(n.msg,{icon:1,time:500},(function(){t.close(r),i&&i(n,!0)}))},error:function(){t.msg("AJAX请求异常"),i&&i(null,!1)}})},formSwitch:function(n,t="",i=null){e.on("switch("+n+")",(function(e){var o=this.checked?"1":"2";r.isEmpty(t)&&(t=cUrl+"/set"+n.substring(0,1).toUpperCase()+n.substring(1));var a={};a.id=this.value,a[n]=o;var c=JSON.stringify(a);JSON.parse(c);l.ajaxPost(t,a,(function(n,e){i&&i(n,e)}))}))},uploadFile:function(n,e=null,i="",a="xls|xlsx",l=10240,c={}){r.isEmpty(i)&&(i=cUrl+"/uploadFile"),o.render({elem:"#"+n,url:i,auto:!1,exts:a,accept:"file",size:l,method:"post",data:c,before:function(n){t.msg("上传并处理中。。。",{icon:16,shade:.01,time:0})},done:function(n){return t.closeAll(),0==n.code?t.alert(n.msg,{title:"上传反馈",skin:"layui-layer-molv",closeBtn:1,anim:0,btn:["确定","取消"],icon:6,yes:function(){e&&e(n,!0)},btn2:function(){}}):t.msg(n.msg,{icon:5}),!1},error:function(){return t.msg("数据请求异常")}})}};n("common",l)}))}]);