!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=20)}({20:function(e,t,a){a(21)},21:function(e,t){layui.define(["layer","table","laytpl","contextMenu"],(function(e){var t=layui.jquery,a=layui.layer,o=layui.table,n=layui.laytpl,r=layui.contextMenu,i=layui.device(),l={merges:function(e,a,n,r){"boolean"==typeof n&&(r=n,n=void 0);for(var i=t('[lay-filter="'+e+'"]+.layui-table-view>.layui-table-box>.layui-table-body>table').find(">tbody>tr"),d=0;d<a.length;d++)n?c(e,a[d],n[d]):c(e,a[d]);function c(e,t,a){var n=o.cache[e];if(n.length>0){var r,l=1;r=a?n[0][a]:i.eq(0).find("td").eq(t).find(".layui-table-cell").html();for(var d=1;d<n.length;d++){var c;if((c=a?n[d][a]:i.eq(d).find("td").eq(t).find(".layui-table-cell").html())===r){if(l++,d===n.length-1){i.eq(d-l+1).find("td").eq(t).attr("rowspan",l);for(var u=1;u<l;u++)i.eq(d-u+1).find("td").eq(t).attr("del","true")}}else{i.eq(d-l).find("td").eq(t).attr("rowspan",l);for(var s=1;s<l;s++)i.eq(d-s).find("td").eq(t).attr("del","true");l=1,r=c}}}}i.find('[del="true"]').remove(),(void 0===r||r)&&o.on("sort("+e+")",(function(){l.merges(e,a,n,!1)}))},bindCtxMenu:function(e,a){var n=o.cache[e],i="#"+e+"+.layui-table-view .layui-table-body tr";t(i).bind("contextmenu",(function(e){var o,l=t(this);return t(i).removeClass("layui-table-click"),l.addClass("layui-table-click"),o="function"==typeof a?a(n[l.data("index")],e.currentTarget):a,r.show(function e(a){if(a){for(var o=[],r=0;r<a.length;r++)o.push({icon:a[r].icon,name:a[r].name,_click:a[r].click,click:function(e,a){var o=t(a.currentTarget);this._click&&this._click(n[o.data("index")],a.currentTarget),o.removeClass("layui-table-click")},subs:e(a[r].subs)});return o}}(o),e.clientX,e.clientY,e),!1}))},exportData:function(e){var t=e.cols,n=e.data,r=e.fileName,d=e.expType,c=e.option;if(c||(c={}),i.ie)return a.msg("不支持ie导出");if("string"==typeof n){var u=a.load(2);return c.url=n,void l.loadUrl(c,(function(t){a.close(u),e.data=t,l.exportData(e)}))}for(var s=0;s<t.length;s++)for(var f=0;f<t[s].length;f++)void 0===t[s][f].type&&(t[s][f].type="normal"),void 0===t[s][f].hide&&(t[s][f].hide=!1);var p=[],v=[],m=[];o.eachCols(void 0,(function(e,t){"normal"!==t.type||t.hide||(p.push(t.title||""),v.push(t.field||"txField_"+e))}),t);for(var b=l.parseTbData(t,l.deepClone(n),!0),h=0;h<b.length;h++){for(var y=[],x=0;x<v.length;x++){var g=b[h][v[x]];g&&(g=g.toString().replace(/,/g,"，")),y.push(g)}m.push(y.join(","))}var w=document.createElement("a"),D={csv:"text/csv",xls:"application/vnd.ms-excel"}[d||"xls"],C=encodeURIComponent(p.join(",")+"\r\n"+m.join("\r\n"));w.href="data:"+D+";charset=utf-8,\ufeff"+C,w.download=(r||"table")+"."+(d||"xls"),document.body.appendChild(w),w.click(),document.body.removeChild(w)},exportDataX:function(e){layui.use("excel",(function(){var t=layui.excel,n=e.cols,r=e.data,i=e.fileName,d=e.expType,c=e.option;if(c||(c={}),d||(d="xlsx"),r&&"string"==typeof r){var u=a.load(2);return c.url=r,void l.loadUrl(c,(function(t){a.close(u),e.data=t,l.exportDataX(e)}))}for(var s=0;s<n.length;s++)for(var f=0;f<n[s].length;f++)void 0===n[s][f].type&&(n[s][f].type="normal"),void 0===n[s][f].hide&&(n[s][f].hide=!1);var p={},v=[];o.eachCols(void 0,(function(e,t){if("normal"===t.type&&!t.hide){var a=t.field||"txField_"+e;v.push(a),p[a]=t.title||""}}),n);var m=l.parseTbData(n,l.deepClone(r),!0),b=t.filterExportData(m,v);b.unshift(p),t.exportExcel({sheet1:b},(i||"table")+"."+d,d)}))},exportDataBack:function(e,a,o){if(a||(a={}),o&&"get"!==o.toString().toLowerCase()){var n='<html><body><form id="eFrom" action="'+e+'" method="'+o+'">';for(var r in a)n+='<textarea name="'+r+'">'+a[r]+"</textarea>";n+="</form></body></html>",t("#exportFrame").remove(),t("body").append('<iframe id="exportFrame" style="display: none;"></iframe>');var i=document.getElementById("exportFrame").contentWindow,l=i.document;i.focus(),l.open(),l.write(n),l.close(),l.getElementById("eFrom").submit()}else{var d="";for(var c in a)d?d+="&"+c+"="+a[c]:d="?"+c+"="+a[c];window.open(e+d)}},render:function(e){var a=t(e.elem).attr("lay-filter");e.autoSort=!1;var n=o.render(e);return o.on("sort("+a+")",(function(a){var o=a.field,r=a.type,i=t.extend(e.where,{sort:o,order:r});n.reload({where:i,page:{curr:1}})})),n},renderFront:function(e){var a,n=t(e.elem).attr("lay-filter");e.autoSort=!1;for(var r=0;r<e.cols.length;r++)for(var i=0;i<e.cols[r].length;i++)e.cols[r][i].templet&&!e.cols[r][i].field&&(e.cols[r][i].field="txField_"+r+"_"+i);if(e.url){var d=l.deepClone(e);d.data=[],d.url=void 0,(a=o.render(d)).reloadUrl=function(o){var r=l.deepClone(e);o&&(r=t.extend(r,o)),t(e.elem+"+.layui-table-view>.layui-table-box").append('<div class="layui-table-init"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></div>'),l.loadUrl(r,(function(e){a.reload({url:"",data:e,page:{curr:1}}),l.putTbData(n,l.parseTbData(r.cols,e)),t('input[tb-search="'+n+'"]').val(""),window.tbX.cacheSearch[n]=void 0}))},a.reloadUrl()}else(a=o.render(e)).reloadData=function(o){a.reload(o),l.parseTbData(e.cols,o.data),l.putTbData(n,o.data),t('input[tb-search="'+n+'"]').val(""),window.tbX.cacheSearch[n]=void 0},l.putTbData(n,l.parseTbData(e.cols,e.data));return l.renderAllTool(a),a},loadUrl:function(e,o){e.response=t.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},e.response);var n=e.response,r=e.where;e.contentType&&0===e.contentType.indexOf("application/json")&&(r=JSON.stringify(r)),t.ajax({type:e.method||"get",url:e.url,contentType:e.contentType,data:r,dataType:"json",headers:e.headers||{},success:function(t){if("function"==typeof e.parseData&&(t=e.parseData(t)||t),t[n.statusName]!=n.statusCode){var r=t[n.msgName]||"返回的数据不符合规范，正确的成功状态码 ("+n.statusName+") 应为："+n.statusCode;a.msg(r,{icon:2})}else o(t[n.dataName])},error:function(e,t){a.msg("数据接口请求异常："+t,{icon:2})}})},parseTbData:function(e,a,r){var i=[];o.eachCols(void 0,(function(e,a){if(a.templet){var o={field:a.field&&(r||0===a.field.indexOf("txField_"))?a.field:"txField_"+e};"string"==typeof a.templet?o.templet=function(e){var o=void 0;return n(t(a.templet).html()).render(e,(function(e){o=e})),o}:o.templet=a.templet,i.push(o)}}),e);for(var l=0;l<a.length;l++)for(var d=a[l],c=0;c<i.length;c++){var u="<div>"+i[c].templet(d)+"</div>";d[i[c].field]=t(u).not(".export-hide").text().replace(/(^\s*)|(\s*$)/g,"")}return a},putTbData:function(e,t){window.tbX.cache[e]=t},getTbData:function(e){var t=window.tbX.cache[e];return l.deepClone(t||o.cache[e])},filterData:function(e,t,a){for(var o,n=[],r=0;r<e.length;r++){var i=e[r];if(!o)if(t)o=t.split(",");else for(var d in o=[],i)i.hasOwnProperty(d)&&o.push(d);for(var c=0;c<o.length;c++)if(l.isContains(i[o[c]],a)){n.push(i);break}}return n},isContains:function(e,t){return e||(e=""),t||(t=""),(e=e.toString().toLowerCase())===(t=t.toString().toLowerCase())||e.indexOf(t)>=0},renderAllTool:function(e){u(e),c(e),d(e),s(e)},deepClone:function(e){var t,a=l.isClass(e);if("Object"===a)t={};else{if("Array"!==a)return e;t=[]}for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];"Object"===l.isClass(n)||"Array"===l.isClass(n)?t[o]=arguments.callee(n):t[o]=e[o]}return t},isClass:function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}};window.tbX||(window.tbX={}),window.tbX.cache||(window.tbX.cache={}),window.tbX.cacheSearch||(window.tbX.cacheSearch={});var d=function(e){var o=e.config.id,n=t('input[tb-search="'+o+'"]');n&&n.length>0&&(n.attr("placeholder")||n.attr("placeholder","输入关键字按回车键搜索"),n.off("keydown").on("keydown",(function(t){if(13===t.keyCode){var r=n.attr("name"),i=n.val().replace(/(^\s*)|(\s*$)/g,""),d=a.msg("搜索中..",{icon:16,shade:.01,time:0}),c=l.getTbData(o),u=l.filterData(c,r,i);window.tbX.cacheSearch[o]=u,e.reload({url:"",data:u,page:{curr:1}}),a.close(d)}})))},c=function(e){var t=e.config.id;o.on("sort("+t+")",(function(o){var n=o.field,r=o.type,i=a.msg("加载中..",{icon:16,shade:.01,time:0}),d=window.tbX.cacheSearch[t];d||(d=l.getTbData(t)),r&&(d=d.sort((function(e,t){var a=e[n],o=t[n];return"asc"===r?a===o?0:a<o?-1:1:a===o?0:a<o?1:-1}))),e.reload({initSort:o,url:"",data:d,page:{curr:1}}),a.close(i)}))},u=function(e){t('[tb-refresh="'+e.config.id+'"]').off("click").on("click",(function(){e.reloadUrl?e.reloadUrl():e.reload({page:{curr:1}})}))},s=function(e){var n=e.config.id;t('[tb-export="'+n+'"]').off("click").on("click",(function(r){if(!(t(this).find(".tbx-dropdown-menu").length>0)){void 0!==r&&(r.preventDefault(),r.stopPropagation());'      <div class="tbx-dropdown-menu-item" data-type="check">导出选中数据</div>','      <div class="tbx-dropdown-menu-item" data-type="current">导出当前页数据</div>','      <div class="tbx-dropdown-menu-item" data-type="all">导出全部数据</div>',"   </div>",t(this).append('<div class="tbx-dropdown-menu">      <div class="tbx-dropdown-menu-item" data-type="check">导出选中数据</div>      <div class="tbx-dropdown-menu-item" data-type="current">导出当前页数据</div>      <div class="tbx-dropdown-menu-item" data-type="all">导出全部数据</div>   </div>'),t(this).addClass("tbx-dropdown-btn"),t(this).parent().css("position","relative"),t(this).parent().css("z-index","9998"),t(".tbx-dropdown-menu").off("click").on("click",".tbx-dropdown-menu-item",(function(r){var i=t(this).data("type");if("check"===i){var d=o.checkStatus(n);0===d.data.length?a.msg("请选择要导出的数据",{icon:2}):(t(".tbx-dropdown-menu").remove(),l.exportData({fileName:e.config.title,cols:e.config.cols,data:d.data}))}else"current"===i?l.exportData({fileName:e.config.title,cols:e.config.cols,data:o.cache[n]}):"all"===i&&l.exportData({fileName:e.config.title,cols:e.config.cols,data:l.getTbData(n)});void 0!==r&&(r.preventDefault(),r.stopPropagation())}))}})),t(document).off("click.tbxDropHide").on("click.tbxDropHide",(function(){t(".tbx-dropdown-menu").remove()}))};t("head").append('<style id="ew-css-tbx" type="text/css">.tbx-dropdown-btn {        position: relative;   }   .tbx-dropdown-btn:hover {        opacity: 1   }   .tbx-dropdown-menu {        position: absolute;        top: 100%;        right: 0;        padding: 5px 0;        margin: 5px 0 0 0;        overflow: visible;        min-width: 110px;        background: #fff;        border-radius: 2px;        box-shadow: 0 2px 4px rgba(0, 0, 0, .12);        border: 1px solid #d2d2d2;        z-index: 9998;        cursor: default;   }   .tbx-dropdown-menu .tbx-dropdown-menu-item {        display: block;        color: #555;        font-size: 14px;        padding: 10px 15px;        text-decoration: none;        white-space: nowrap;        cursor: pointer;        user-select: none;        line-height: normal;   }   .tbx-dropdown-menu .tbx-dropdown-menu-item:hover {        background-color: #eeeeee;   }   .export-show {        display: none;   }</style>'),e("tableX",l)}))}});